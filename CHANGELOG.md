# 📝 版本更新紀錄

## [v2.0.0] - 2025-01-XX

### 🎉 重大更新：固定循環池系統

#### ✨ 新功能

##### 固定循環池系統（Cycle Pool System）
- **循環池大小**：從 1000 增加至 **5000**
- **保底機制**：每 5000 抽保證所有獎項至少出現一次
- **權重系統**：使用 prob 權重值，非直接機率
- **共享池**：所有玩家從同一循環池依序抽取
- **自動重置**：抽完 5000 個自動重新生成
- **Fisher-Yates 洗亂**：確保隨機性

##### 出貨率優化
- **降低 80%**：稀有獎項出現頻率大幅降低
- **適合多人**：專為 10-20 位玩家同時在線設計
- **更具挑戰**：提升遊戲長期可玩性

#### 🔄 介面改進

##### 獎池查看器重構
- **移除分類**：取消稀有度分類（大獎/稀有/罕見/普通）
- **條列清單**：改為單一垂直列表
- **機率排序**：按機率由高到低排序
- **顯示格式**：縮圖 → 品項 → 價值 → 機率

##### 機率顯示修正
- **所有池權重總和 = 1.0**
- **展示機率 = 實際機率**
- **pool30**：15 個獎項，活力少女 0.49%
- **pool90**：16 個獎項，冬雪密語 0.43%
- **pool199**：16 個獎項，雪戀喵語 0.34%

#### 🐛 修正

- 修正機率值過大導致的顯示錯誤
- 修正 pool90 中「稻草帽」的權重錯誤
- 優化循環池生成效能
- 改善記憶體使用

#### 📊 技術細節

**循環池生成流程：**
```
1. 生成 5000 格循環池
2. 保底：每個獎項至少加入 1 次
3. 權重分配：剩餘空間按 prob 比例填充
4. Fisher-Yates 洗亂
5. 玩家依序抽取
6. 抽完自動重新生成
```

**權重配置範例（pool30）：**
| 獎項 | 權重 | 展示機率 | 說明 |
|------|------|----------|------|
| 秋野仙蹤 | 0.2013 | 20.13% | 最高機率 |
| 活力少女 | 0.0049 | 0.49% | 最低機率 |

#### 📈 效果對比

| 項目 | v1.x（舊版） | v2.0（新版） |
|------|-------------|-------------|
| 循環池大小 | 1000 | 5000 |
| 出貨率 | 基準 | -80% |
| 保底輪次 | 1000 抽 | 5000 抽 |
| 適合人數 | 5-10 人 | 10-20 人 |
| 稀有獎項頻率 | 高 | 低 |

---

## [v1.x.x] - 歷史版本

### v1.0.0 - 初始版本
- ✅ 單人抽蛋模式
- ✅ 雙人對戰模式
- ✅ 獎池查看器（分類顯示）
- ✅ 全服廣播系統
- ✅ 冷卻機制
- ✅ 基礎抽獎系統（權重算法）

---

## 🔮 未來規劃

### v2.1.0（計劃中）
- [ ] 玩家統計系統
- [ ] 抽卡歷史紀錄
- [ ] 成就系統
- [ ] 排行榜功能

### v2.2.0（計劃中）
- [ ] 多獎池同時運作
- [ ] 保底計數器顯示
- [ ] 自訂循環池大小
- [ ] 管理後台

---

## 📌 版本說明

- **主版本號（Major）**：重大功能更新或架構變更
- **次版本號（Minor）**：新增功能或重要改進
- **修訂版本號（Patch）**：錯誤修復或小型優化

**當前版本：v2.0.0**

