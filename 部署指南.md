# ğŸš€ å°ˆæ¡ˆéƒ¨ç½²æŒ‡å—

æœ¬æŒ‡å—å°‡æ•™æ‚¨å¦‚ä½•å°‡ã€Œå¤šäººæŠ½è›‹å°æˆ°éŠæˆ²ã€éƒ¨ç½²åˆ°ç·šä¸Šï¼Œè®“å…¶ä»–äººå¯ä»¥é€éç¶²å€è¨ªå•ã€‚

---

## ğŸ“‹ éƒ¨ç½²æ–¹æ¡ˆç¸½è¦½

### æ¨è–¦çµ„åˆï¼ˆå…è²»ï¼‰

| æœå‹™ | å¹³å° | è²»ç”¨ | WebSocket æ”¯æ´ |
|------|------|------|----------------|
| å¾Œç«¯ | **Render** æˆ– **Railway** | å…è²» | âœ… |
| å‰ç«¯ | **Vercel** æˆ– **Netlify** | å…è²» | N/A |

---

## ğŸ¯ éƒ¨ç½²ç­–ç•¥

### æ­¥é©Ÿ 1ï¼šéƒ¨ç½²å¾Œç«¯ï¼ˆå…ˆéƒ¨ç½²ï¼‰
### æ­¥é©Ÿ 2ï¼šéƒ¨ç½²å‰ç«¯ï¼ˆä½¿ç”¨å¾Œç«¯ URLï¼‰

---

## ğŸ–¥ï¸ å¾Œç«¯éƒ¨ç½²

### æ–¹æ¡ˆ Aï¼šä½¿ç”¨ Renderï¼ˆæ¨è–¦ï¼‰

#### 1. æº–å‚™å¾Œç«¯ä»£ç¢¼

é¦–å…ˆï¼Œç¢ºä¿å¾Œç«¯ä»£ç¢¼åœ¨ Git å€‰åº«ä¸­ï¼ˆGitHubã€GitLab æˆ– Bitbucketï¼‰

å¦‚æœé‚„æ²’æœ‰ï¼ŒåŸ·è¡Œï¼š

```bash
cd D:\TestProject\GachaEgg
git init
git add .
git commit -m "Initial commit"
```

ç„¶å¾Œæ¨é€åˆ° GitHubï¼š
1. åœ¨ GitHub å»ºç«‹æ–°å€‰åº«
2. åŸ·è¡Œï¼š
```bash
git remote add origin https://github.com/ä½ çš„ç”¨æˆ¶å/GachaEgg.git
git branch -M main
git push -u origin main
```

#### 2. åœ¨ Render éƒ¨ç½²

1. å‰å¾€ [Render](https://render.com/) ä¸¦è¨»å†Š/ç™»å…¥
2. é»æ“Š **ã€ŒNew +ã€** â†’ **ã€ŒWeb Serviceã€**
3. é€£æ¥æ‚¨çš„ GitHub å€‰åº«
4. è¨­å®šå¦‚ä¸‹ï¼š

**åŸºæœ¬è¨­å®šï¼š**
- **Name**: `gacha-game-backend`ï¼ˆæˆ–ä»»ä½•åç¨±ï¼‰
- **Region**: é¸æ“‡é›¢æ‚¨æœ€è¿‘çš„å€åŸŸ
- **Branch**: `main`
- **Root Directory**: `server`
- **Runtime**: `Node`
- **Build Command**: `npm install`
- **Start Command**: `npm start`

**é€²éšè¨­å®šï¼ˆEnvironmentï¼‰ï¼š**
```
PORT=3000
NODE_ENV=production
CORS_ORIGIN=*
```

5. é»æ“Š **ã€ŒCreate Web Serviceã€**
6. ç­‰å¾…éƒ¨ç½²å®Œæˆï¼ˆç´„ 3-5 åˆ†é˜ï¼‰
7. **è¨˜ä¸‹æ‚¨çš„å¾Œç«¯ URL**ï¼Œä¾‹å¦‚ï¼š`https://gacha-game-backend.onrender.com`

---

### æ–¹æ¡ˆ Bï¼šä½¿ç”¨ Railway

#### 1. éƒ¨ç½²åˆ° Railway

1. å‰å¾€ [Railway](https://railway.app/) ä¸¦è¨»å†Š/ç™»å…¥
2. é»æ“Š **ã€ŒNew Projectã€** â†’ **ã€ŒDeploy from GitHub repoã€**
3. é¸æ“‡æ‚¨çš„å€‰åº«
4. Railway æœƒè‡ªå‹•åµæ¸¬ Node.js å°ˆæ¡ˆ

#### 2. è¨­å®šç’°å¢ƒè®Šæ•¸

åœ¨ Railway å°ˆæ¡ˆè¨­å®šä¸­æ·»åŠ ï¼š
```
ROOT_DIRECTORY=server
PORT=3000
NODE_ENV=production
```

#### 3. éƒ¨ç½²

- Railway æœƒè‡ªå‹•éƒ¨ç½²
- è¨˜ä¸‹æ‚¨çš„å¾Œç«¯ URLï¼Œä¾‹å¦‚ï¼š`https://gachaegg-production.up.railway.app`

---

## ğŸ¨ å‰ç«¯éƒ¨ç½²

### æ–¹æ¡ˆ Aï¼šä½¿ç”¨ Vercelï¼ˆæ¨è–¦ï¼‰

#### 1. ä¿®æ”¹å‰ç«¯é…ç½®

åœ¨æœ¬åœ°ä¿®æ”¹ `client/src/hooks/useSocket.js`ï¼š

```javascript
const SOCKET_URL = import.meta.env.VITE_SOCKET_URL || 'https://ä½ çš„å¾Œç«¯URL.com';
```

æˆ–è€…å»ºç«‹ `client/.env.production`ï¼š

```env
VITE_SOCKET_URL=https://gacha-game-backend.onrender.com
```

#### 2. æäº¤è®Šæ›´

```bash
git add .
git commit -m "Add production socket URL"
git push
```

#### 3. åœ¨ Vercel éƒ¨ç½²

1. å‰å¾€ [Vercel](https://vercel.com/) ä¸¦è¨»å†Š/ç™»å…¥
2. é»æ“Š **ã€ŒAdd Newã€** â†’ **ã€ŒProjectã€**
3. å°å…¥æ‚¨çš„ GitHub å€‰åº«
4. è¨­å®šå¦‚ä¸‹ï¼š

**Framework Preset**: `Vite`

**Root Directory**: `client`

**Build Command**: `npm run build`

**Output Directory**: `dist`

**Environment Variables**:
```
VITE_SOCKET_URL=https://gacha-game-backend.onrender.com
```
ï¼ˆæ›¿æ›æˆæ‚¨çš„å¾Œç«¯ URLï¼‰

5. é»æ“Š **ã€ŒDeployã€**
6. ç­‰å¾…éƒ¨ç½²å®Œæˆ
7. **æ‚¨çš„éŠæˆ²ç¶²å€**ï¼š`https://ä½ çš„å°ˆæ¡ˆå.vercel.app`

---

### æ–¹æ¡ˆ Bï¼šä½¿ç”¨ Netlify

#### 1. å»ºç½®å‰ç«¯

æœ¬åœ°åŸ·è¡Œï¼š
```bash
cd client
npm run build
```

#### 2. éƒ¨ç½²åˆ° Netlify

**æ–¹æ³• 1 - æ‹–æ”¾ï¼ˆæœ€ç°¡å–®ï¼‰ï¼š**
1. å‰å¾€ [Netlify](https://www.netlify.com/)
2. å°‡ `client/dist` è³‡æ–™å¤¾æ‹–æ”¾åˆ°é é¢
3. å®Œæˆï¼

**æ–¹æ³• 2 - Git é€£æ¥ï¼š**
1. åœ¨ Netlify é»æ“Š **ã€ŒAdd new siteã€** â†’ **ã€ŒImport an existing projectã€**
2. é€£æ¥ GitHub å€‰åº«
3. è¨­å®šï¼š
   - **Base directory**: `client`
   - **Build command**: `npm run build`
   - **Publish directory**: `client/dist`
   - **Environment variables**:
     ```
     VITE_SOCKET_URL=https://gacha-game-backend.onrender.com
     ```
4. é»æ“Š **ã€ŒDeployã€**

---

## ğŸ”§ éƒ¨ç½²å¾Œè¨­å®š

### 1. æ›´æ–°å¾Œç«¯ CORS

ç·¨è¼¯ `server/index.js`ï¼Œä¿®æ”¹ CORS è¨­å®šï¼š

```javascript
app.use(cors({
  origin: [
    'http://localhost:5173',
    'https://ä½ çš„å‰ç«¯ç¶²å€.vercel.app'
  ]
}));
```

æˆ–è€…ä½¿ç”¨ç’°å¢ƒè®Šæ•¸ï¼š
```javascript
app.use(cors({
  origin: process.env.CORS_ORIGIN || '*'
}));
```

åœ¨ Render è¨­å®šç’°å¢ƒè®Šæ•¸ï¼š
```
CORS_ORIGIN=https://ä½ çš„å‰ç«¯ç¶²å€.vercel.app
```

### 2. æ¨é€æ›´æ–°

```bash
git add .
git commit -m "Update CORS settings"
git push
```

Render å’Œ Vercel æœƒè‡ªå‹•é‡æ–°éƒ¨ç½²ã€‚

---

## âœ… é©—è­‰éƒ¨ç½²

### æ¸¬è©¦æ¸…å–®

1. **å¾Œç«¯å¥åº·æª¢æŸ¥**
   - è¨ªå•ï¼š`https://ä½ çš„å¾Œç«¯URL.com/health`
   - æ‡‰è©²çœ‹åˆ°ï¼š`{"status":"healthy",...}`

2. **å‰ç«¯è¨ªå•**
   - è¨ªå•ï¼š`https://ä½ çš„å‰ç«¯URL.vercel.app`
   - æ‡‰è©²çœ‹åˆ°éŠæˆ²é¦–é 
   - æª¢æŸ¥é€£ç·šç‹€æ…‹ï¼šæ‡‰é¡¯ç¤ºã€Œâœ… å·²é€£ç·šã€

3. **åŠŸèƒ½æ¸¬è©¦**
   - âœ… è¼¸å…¥ç©å®¶åç¨±
   - âœ… å–®äººæŠ½è›‹åŠŸèƒ½
   - âœ… å»ºç«‹å°æˆ°æˆ¿é–“
   - âœ… åŠ å…¥å°æˆ°æˆ¿é–“
   - âœ… å¤§çå»£æ’­

---

## ğŸ’° è²»ç”¨èªªæ˜

### Renderï¼ˆå…è²»æ–¹æ¡ˆï¼‰
- âœ… 750 å°æ™‚/æœˆ
- âš ï¸ é–’ç½® 15 åˆ†é˜å¾Œæœƒä¼‘çœ 
- âš ï¸ å–šé†’éœ€è¦ 30-60 ç§’

### Railwayï¼ˆå…è²»æ–¹æ¡ˆï¼‰
- âœ… $5 USD å…è²»é¡åº¦/æœˆ
- âœ… ä¸æœƒä¼‘çœ 

### Vercelï¼ˆå…è²»æ–¹æ¡ˆï¼‰
- âœ… ç„¡é™åˆ¶å°ˆæ¡ˆ
- âœ… 100GB æµé‡/æœˆ

### Netlifyï¼ˆå…è²»æ–¹æ¡ˆï¼‰
- âœ… 100GB æµé‡/æœˆ
- âœ… 300 åˆ†é˜å»ºç½®æ™‚é–“/æœˆ

---

## ğŸ”„ æ›´æ–°éƒ¨ç½²

### æ›´æ–°ä»£ç¢¼

```bash
# ä¿®æ”¹ä»£ç¢¼å¾Œ
git add .
git commit -m "Update: æè¿°æ‚¨çš„ä¿®æ”¹"
git push
```

- **Render** / **Railway** æœƒè‡ªå‹•åµæ¸¬ä¸¦é‡æ–°éƒ¨ç½²å¾Œç«¯
- **Vercel** / **Netlify** æœƒè‡ªå‹•åµæ¸¬ä¸¦é‡æ–°éƒ¨ç½²å‰ç«¯

---

## ğŸŒ è‡ªè¨‚ç¶²åŸŸï¼ˆé¸é…ï¼‰

### Vercel è‡ªè¨‚ç¶²åŸŸ

1. åœ¨ Vercel å°ˆæ¡ˆè¨­å®šä¸­é»æ“Š **ã€ŒDomainsã€**
2. è¼¸å…¥æ‚¨çš„ç¶²åŸŸåç¨±
3. æŒ‰ç…§æŒ‡ç¤ºè¨­å®š DNSï¼ˆåœ¨æ‚¨çš„ç¶²åŸŸè¨»å†Šå•†ï¼‰
4. ç­‰å¾… DNS ç”Ÿæ•ˆï¼ˆé€šå¸¸ 24-48 å°æ™‚ï¼‰

### Render è‡ªè¨‚ç¶²åŸŸ

1. åœ¨ Render å°ˆæ¡ˆè¨­å®šä¸­é»æ“Š **ã€ŒCustom Domainsã€**
2. æ·»åŠ æ‚¨çš„ç¶²åŸŸ
3. è¨­å®š CNAME è¨˜éŒ„æŒ‡å‘ Render æä¾›çš„ç¶²å€

---

## ğŸ“± é€²éšå„ªåŒ–

### 1. æ·»åŠ  PWA æ”¯æ´

è®“éŠæˆ²å¯ä»¥ã€Œå®‰è£ã€åˆ°æ‰‹æ©Ÿï¼š
- ä½¿ç”¨ `vite-plugin-pwa`

### 2. æ•ˆèƒ½å„ªåŒ–

- å•Ÿç”¨ CDN
- åœ–ç‰‡å„ªåŒ–ï¼ˆWebP æ ¼å¼ï¼‰
- ç¨‹å¼ç¢¼åˆ†å‰²

### 3. ç›£æ§

**Render æä¾›ï¼š**
- CPU/è¨˜æ†¶é«”ä½¿ç”¨é‡
- è«‹æ±‚æ—¥èªŒ
- éŒ¯èª¤è¿½è¹¤

**æ¨è–¦å·¥å…·ï¼š**
- [Sentry](https://sentry.io/) - éŒ¯èª¤è¿½è¹¤ï¼ˆå…è²»æ–¹æ¡ˆï¼‰
- [LogRocket](https://logrocket.com/) - ä½¿ç”¨è€…è¡Œç‚ºéŒ„è£½

---

## ğŸ› å¸¸è¦‹å•é¡Œ

### Q: å¾Œç«¯éƒ¨ç½²å¾Œç„¡æ³•é€£ç·š
**A:** 
1. æª¢æŸ¥ Render/Railway éƒ¨ç½²æ—¥èªŒ
2. ç¢ºèª PORT ç’°å¢ƒè®Šæ•¸è¨­å®šæ­£ç¢º
3. æ¸¬è©¦ `/health` ç«¯é»

### Q: Socket.IO é€£ç·šå¤±æ•—
**A:**
1. ç¢ºèªå‰ç«¯ `VITE_SOCKET_URL` æ­£ç¢º
2. æª¢æŸ¥å¾Œç«¯ CORS è¨­å®š
3. Render å…è²»æ–¹æ¡ˆä¼‘çœ å¾Œéœ€è¦å–šé†’

### Q: å‰ç«¯é¡¯ç¤ºã€Œé€£ç·šä¸­...ã€
**A:**
1. æª¢æŸ¥å¾Œç«¯æ˜¯å¦é‹è¡Œ
2. é–‹å•Ÿç€è¦½å™¨é–‹ç™¼è€…å·¥å…·æŸ¥çœ‹éŒ¯èª¤
3. ç¢ºèª Socket URL æ­£ç¢º

### Q: Render æœå‹™ä¼‘çœ å¤ªé »ç¹
**A:**
- å‡ç´šåˆ°ä»˜è²»æ–¹æ¡ˆï¼ˆ$7/æœˆï¼‰
- æˆ–ä½¿ç”¨ Railwayï¼ˆä¸æœƒä¼‘çœ ï¼‰
- æˆ–ä½¿ç”¨ UptimeRobot å®šæœŸ pingï¼ˆä¿æŒå–šé†’ï¼‰

---

## ğŸ“ éœ€è¦å¹«åŠ©ï¼Ÿ

- æŸ¥çœ‹ [Render æ–‡æª”](https://render.com/docs)
- æŸ¥çœ‹ [Vercel æ–‡æª”](https://vercel.com/docs)
- æŸ¥çœ‹ [Railway æ–‡æª”](https://docs.railway.app/)

---

## ğŸ‰ å®Œæˆï¼

æ­å–œæ‚¨æˆåŠŸéƒ¨ç½²å°ˆæ¡ˆï¼ç¾åœ¨æ‚¨å¯ä»¥åˆ†äº«éŠæˆ²ç¶²å€çµ¦æœ‹å‹ä¸€èµ·ç©äº†ï¼

**æ‚¨çš„éŠæˆ²ç¶²å€ï¼š** `https://ä½ çš„å°ˆæ¡ˆå.vercel.app`

ç¥æ‚¨éŠæˆ²æ„‰å¿«ï¼ğŸ°âœ¨

