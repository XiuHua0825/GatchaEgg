# ğŸ° å¤šäººæŠ½è›‹å°æˆ°éŠæˆ²

ä¸€å€‹åŸºæ–¼ React + Socket.IO çš„å³æ™‚å¤šäººæŠ½è›‹å°æˆ°éŠæˆ²ï¼Œæ”¯æ´å–®äººæŠ½è›‹èˆ‡é›™äººå°æˆ°æ¨¡å¼ã€‚

## ğŸ“‹ åŠŸèƒ½ç‰¹è‰²

### ğŸ² å–®äººæ¨¡å¼
- è‡ªç”±é¸æ“‡æ‰­è›‹é¡å‹èˆ‡æŠ½å–æ•¸é‡
- å³æ™‚æŠ½å¡çµæœé¡¯ç¤º
- å®Œæ•´çš„æŠ½å¡æ­·å²ç´€éŒ„
- æŠ½å¡å†·å»æ©Ÿåˆ¶ï¼ˆ10æŠ½å¾Œå†·å»5ç§’ï¼‰
- å¤§çå…¨æœå»£æ’­

### âš”ï¸ å°æˆ°æ¨¡å¼
- æˆ¿é–“åˆ¶é›™äººå°æˆ°
- å»ºç«‹æˆ¿é–“ / åŠ å…¥æˆ¿é–“
- å€’æ•¸åŒæ­¥é–‹å§‹
- å³æ™‚å°æˆ°çµæœ
- åƒ¹å€¼æ¯”æ‹¼å‹è² åˆ¤å®š

### ğŸŒŸ å…¶ä»–åŠŸèƒ½
- å…¨æœå¤§çå»£æ’­è·‘é¦¬ç‡ˆ
- Socket.IO å³æ™‚é€šè¨Š
- éŸ¿æ‡‰å¼ UI è¨­è¨ˆ
- ç¾è§€çš„å‹•ç•«æ•ˆæœ

## ğŸ›  æŠ€è¡“æ£§

### å‰ç«¯
- React 18
- Vite
- Zustand (ç‹€æ…‹ç®¡ç†)
- Socket.IO Client
- React Router

### å¾Œç«¯
- Node.js
- Express
- Socket.IO
- JSON æª”æ¡ˆè³‡æ–™åº«

## ğŸ“ å°ˆæ¡ˆçµæ§‹

```
GachaEgg/
â”œâ”€â”€ client/                 # å‰ç«¯å°ˆæ¡ˆ
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ pages/         # é é¢çµ„ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ Home.jsx
â”‚   â”‚   â”‚   â”œâ”€â”€ SinglePlay.jsx
â”‚   â”‚   â”‚   â””â”€â”€ BattleRoom.jsx
â”‚   â”‚   â”œâ”€â”€ components/    # é€šç”¨çµ„ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ GachaResult.jsx
â”‚   â”‚   â”‚   â”œâ”€â”€ RoomCreator.jsx
â”‚   â”‚   â”‚   â”œâ”€â”€ RoomJoiner.jsx
â”‚   â”‚   â”‚   â”œâ”€â”€ Countdown.jsx
â”‚   â”‚   â”‚   â””â”€â”€ BroadcastView.jsx
â”‚   â”‚   â”œâ”€â”€ hooks/         # è‡ªè¨‚ Hooks
â”‚   â”‚   â”‚   â””â”€â”€ useSocket.js
â”‚   â”‚   â”œâ”€â”€ store/         # Zustand ç‹€æ…‹ç®¡ç†
â”‚   â”‚   â”‚   â””â”€â”€ gameStore.js
â”‚   â”‚   â”œâ”€â”€ App.jsx
â”‚   â”‚   â””â”€â”€ main.jsx
â”‚   â”œâ”€â”€ package.json
â”‚   â””â”€â”€ vite.config.js
â”‚
â””â”€â”€ server/                # å¾Œç«¯å°ˆæ¡ˆ
    â”œâ”€â”€ gacha/            # æŠ½å¡ç³»çµ±
    â”‚   â”œâ”€â”€ eggs.json     # æ‰­è›‹è³‡æ–™
    â”‚   â”œâ”€â”€ pools.json    # çæ± è³‡æ–™
    â”‚   â””â”€â”€ gachaEngine.js
    â”œâ”€â”€ socket/           # Socket.IO è™•ç†
    â”‚   â”œâ”€â”€ socketManager.js
    â”‚   â””â”€â”€ handlers/
    â”‚       â”œâ”€â”€ roomHandler.js
    â”‚       â”œâ”€â”€ singlePlayHandler.js
    â”‚       â””â”€â”€ broadcastHandler.js
    â”œâ”€â”€ index.js
    â””â”€â”€ package.json
```

## ğŸš€ å¿«é€Ÿé–‹å§‹

### ç’°å¢ƒéœ€æ±‚
- Node.js 18+ 
- npm æˆ– yarn

### å®‰è£æ­¥é©Ÿ

#### 1. å®‰è£å¾Œç«¯ä¾è³´
```bash
cd server
npm install
```

#### 2. å®‰è£å‰ç«¯ä¾è³´
```bash
cd client
npm install
```

### å•Ÿå‹•å°ˆæ¡ˆ

#### 1. å•Ÿå‹•å¾Œç«¯ä¼ºæœå™¨
```bash
cd server
npm start
# æˆ–é–‹ç™¼æ¨¡å¼ï¼ˆæ”¯æ´ç†±é‡è¼‰ï¼‰
npm run dev
```
ä¼ºæœå™¨å°‡é‹è¡Œæ–¼ `http://localhost:3000`

#### 2. å•Ÿå‹•å‰ç«¯é–‹ç™¼ä¼ºæœå™¨
```bash
cd client
npm run dev
```
å‰ç«¯å°‡é‹è¡Œæ–¼ `http://localhost:5173`

#### 3. é–‹å•Ÿç€è¦½å™¨
è¨ªå• `http://localhost:5173` é–‹å§‹éŠæˆ²ï¼

## ğŸ® éŠæˆ²è¦å‰‡

### å–®äººæ¨¡å¼
1. è¼¸å…¥ç©å®¶åç¨±
2. é¸æ“‡æ‰­è›‹é¡å‹ï¼ˆ30å…ƒ/50å…ƒ/100å…ƒï¼‰
3. é¸æ“‡æŠ½å–æ•¸é‡ï¼ˆ1/5/10æŠ½ï¼‰
4. é»æ“Šã€Œé–‹å§‹æŠ½è›‹ã€
5. æŸ¥çœ‹æŠ½å¡çµæœèˆ‡æ­·å²ç´€éŒ„

**æ³¨æ„ï¼š** æŠ½æ»¿ 10 é¡†è›‹æœƒé€²å…¥ 5 ç§’å†·å»æ™‚é–“

### å°æˆ°æ¨¡å¼
1. è¼¸å…¥ç©å®¶åç¨±
2. é¸æ“‡ã€Œå»ºç«‹æˆ¿é–“ã€æˆ–ã€ŒåŠ å…¥æˆ¿é–“ã€

**å»ºç«‹æˆ¿é–“ï¼š**
- é¸æ“‡æ‰­è›‹é¡å‹èˆ‡æŠ½å–æ•¸é‡
- å–å¾— 6 ç¢¼æˆ¿é–“è™Ÿ
- ç­‰å¾…å°æ‰‹åŠ å…¥

**åŠ å…¥æˆ¿é–“ï¼š**
- è¼¸å…¥æˆ¿ä¸»æä¾›çš„ 6 ç¢¼æˆ¿é–“è™Ÿ
- åŠ å…¥æˆåŠŸå¾Œç­‰å¾…å€’æ•¸

3. é›™æ–¹æº–å‚™å®Œæˆå¾Œé–‹å§‹ 3 ç§’å€’æ•¸
4. åŒæ­¥æŠ½å¡
5. æ¯”è¼ƒç¸½åƒ¹å€¼åˆ¤å®šå‹è² 

## ğŸ“Š è³‡æ–™æ ¼å¼

### eggs.json - æ‰­è›‹é¡å‹
```json
[
  {
    "id": "egg30",
    "price": 30,
    "pool": "pool30",
    "name": "30å…ƒæ‰­è›‹"
  }
]
```

### pools.json - çæ± è¨­å®š
```json
{
  "pool30": [
    {
      "name": "å°é­šä¹¾",
      "prob": 0.50,
      "price": 10,
      "image": "/items/fish.png",
      "isJackpot": false
    },
    {
      "name": "é»ƒé‡‘è²“ç½ï¼ˆå¤§çï¼‰",
      "prob": 0.05,
      "price": 300,
      "image": "/items/gold.png",
      "isJackpot": true
    }
  ]
}
```

## ğŸ”Œ Socket.IO äº‹ä»¶

### å–®äººæ¨¡å¼
- `single-draw` - åŸ·è¡ŒæŠ½å¡
- `single-result` - æŠ½å¡çµæœ
- `single-cooldown` - å†·å»é€šçŸ¥
- `check-cooldown` - æŸ¥è©¢å†·å»ç‹€æ…‹

### å°æˆ°æ¨¡å¼
- `create-room` - å»ºç«‹æˆ¿é–“
- `room-created` - æˆ¿é–“å»ºç«‹æˆåŠŸ
- `join-room` - åŠ å…¥æˆ¿é–“
- `room-joined` - åŠ å…¥æˆåŠŸ
- `start-countdown` - å€’æ•¸é–‹å§‹
- `battle-start` - å°æˆ°é–‹å§‹
- `battle-result` - å°æˆ°çµæœ
- `room-error` - æˆ¿é–“éŒ¯èª¤
- `room-closed` - æˆ¿é–“é—œé–‰

### å…¨æœå»£æ’­
- `global-jackpot` - å¤§çå»£æ’­
- `global-message` - ç³»çµ±è¨Šæ¯

## ğŸŒ éƒ¨ç½²

### éƒ¨ç½²åˆ° Render / Railway

#### å¾Œç«¯éƒ¨ç½²
1. å°‡ `server` ç›®éŒ„æ¨é€åˆ° Git
2. åœ¨ Render/Railway å»ºç«‹æ–°æœå‹™
3. è¨­å®šå•Ÿå‹•æŒ‡ä»¤ï¼š`npm start`
4. è¨­å®šç’°å¢ƒè®Šæ•¸ï¼ˆå¦‚éœ€è¦ï¼‰
5. éƒ¨ç½²ä¸¦å–å¾— URL

#### å‰ç«¯éƒ¨ç½²
1. ä¿®æ”¹ `client/src/hooks/useSocket.js` ä¸­çš„ `SOCKET_URL` ç‚ºå¾Œç«¯ URL
2. åŸ·è¡Œ `npm run build` å»ºç«‹ç”Ÿç”¢ç‰ˆæœ¬
3. å°‡ `dist` ç›®éŒ„éƒ¨ç½²åˆ°éœæ…‹ç¶²ç«™æœå‹™ï¼ˆVercel/Netlifyï¼‰

æˆ–ä½¿ç”¨ç’°å¢ƒè®Šæ•¸ï¼š
```bash
# .env
VITE_SOCKET_URL=https://your-backend-url.com
```

## ğŸ”§ æ“´å……åŠŸèƒ½

### ä½¿ç”¨ Google Sheet ä½œç‚ºè³‡æ–™ä¾†æº

å¯ä»¥å°‡ `eggs.json` å’Œ `pools.json` æ”¹ç‚ºå¾ Google Sheet è®€å–ï¼š

```javascript
// server/gacha/gachaEngine.js
import { google } from 'googleapis';

async function loadFromGoogleSheet() {
  const auth = new google.auth.GoogleAuth({
    keyFile: 'credentials.json',
    scopes: ['https://www.googleapis.com/auth/spreadsheets.readonly'],
  });

  const sheets = google.sheets({ version: 'v4', auth });
  // ... è®€å– Sheet è³‡æ–™
}
```

## ğŸ“ å¾…è¾¦åŠŸèƒ½

- [ ] æ·»åŠ éŸ³æ•ˆèˆ‡èƒŒæ™¯éŸ³æ¨‚
- [ ] ç©å®¶ç­‰ç´šèˆ‡æˆå°±ç³»çµ±
- [ ] æ’è¡Œæ¦œåŠŸèƒ½
- [ ] æ›´å¤šæ‰­è›‹é¡å‹
- [ ] å¤šäººæˆ¿é–“ï¼ˆ3äººä»¥ä¸Šï¼‰
- [ ] è§€æˆ°æ¨¡å¼
- [ ] Google Sheet è³‡æ–™æ•´åˆ

## ğŸ› å·²çŸ¥å•é¡Œ

- è‹¥å¾Œç«¯æ–·ç·šï¼Œå‰ç«¯éœ€è¦æ‰‹å‹•é‡æ–°æ•´ç†é é¢
- åœ–ç‰‡è³‡æºç›®å‰ä½¿ç”¨ä½”ä½åœ–ï¼Œéœ€æ›¿æ›ç‚ºå¯¦éš›åœ–ç‰‡

## ğŸ“„ æˆæ¬Š

MIT License

## ğŸ‘¥ è²¢ç»

æ­¡è¿æäº¤ Issue æˆ– Pull Requestï¼

---

**ç¥æ‚¨éŠæˆ²æ„‰å¿«ï¼ğŸ‰**

